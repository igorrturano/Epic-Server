use uo;
use os;

program EnterArea(params)
    var npc := params[1];
    var mobile := params[2];
    
    // Only respond to player characters
    if (mobile.npctemplate)
        return 0;
    endif
    
    // Get NPC's personality to determine greeting style
    var personality := GetObjProperty(npc, "personality");
    if (!personality)
        personality := struct{
            "friendliness" := RandomInt(100),
            "aggression" := RandomInt(100),
            "curiosity" := RandomInt(100)
        };
        SetObjProperty(npc, "personality", personality);
    endif
    
    // Small chance to greet player based on friendliness
    if (RandomInt(100) < personality.friendliness)
        var greetings := array{
            "*observa " + mobile.name + " com interesse*",
            "*nota a presenÃ§a de " + mobile.name + "*",
            "*acena para " + mobile.name + "*"
        };
        
        PrintText(npc, greetings[RandomInt(greetings.size())+1]);
    endif
    
    return 1;
endprogram